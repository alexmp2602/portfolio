---
import { Icon } from "astro-icon/components";

type Skill = { name: string; icon: string; color?: string };

const groups: { label: string; items: Skill[] }[] = [
  {
    label: "Frontend",
    items: [
      { name: "HTML5", icon: "simple-icons:html5", color: "#E34F26" },
      { name: "CSS3", icon: "simple-icons:css3", color: "#1572B6" },
      { name: "JavaScript", icon: "simple-icons:javascript", color: "#F7DF1E" },
      { name: "TypeScript", icon: "simple-icons:typescript", color: "#3178C6" },
      { name: "React", icon: "simple-icons:react", color: "#61DAFB" },
      { name: "Astro", icon: "simple-icons:astro", color: "#FF5D01" },
      { name: "Next.js", icon: "simple-icons:nextdotjs", color: "#000000" },
      { name: "Tailwind", icon: "simple-icons:tailwindcss", color: "#06B6D4" },
    ],
  },
  {
    label: "Herramientas",
    items: [
      { name: "Git", icon: "simple-icons:git", color: "#F05032" },
      { name: "GitHub", icon: "simple-icons:github", color: "#3dc1ce" },
      { name: "Vite", icon: "simple-icons:vite", color: "#646CFF" },
      { name: "ESLint", icon: "simple-icons:eslint", color: "#4B32C3" },
      { name: "Prettier", icon: "simple-icons:prettier", color: "#F7B93E" },
      { name: "Jest", icon: "simple-icons:jest", color: "#C21325" },
      { name: "Lighthouse", icon: "simple-icons:lighthouse", color: "#FF6D00" },
      { name: "DevTools", icon: "simple-icons:googlechrome", color: "#4285F4" },
    ],
  },
  {
    label: "Backend",
    items: [
      { name: "Node.js", icon: "simple-icons:nodedotjs", color: "#339933" },
      { name: "Express", icon: "simple-icons:express", color: "#000000" },
      { name: "Prisma", icon: "simple-icons:prisma", color: "#2D3748" },
      { name: "PostgreSQL", icon: "simple-icons:postgresql", color: "#4169E1" },
      { name: "Laravel", icon: "simple-icons:laravel", color: "#FF2D20" },
      { name: "MySQL", icon: "simple-icons:mysql", color: "#4479A1" },
      { name: "SQLite", icon: "simple-icons:sqlite", color: "#003B57" },
      { name: "MongoDB", icon: "simple-icons:mongodb", color: "#47A248" },
    ],
  },
  {
    label: "Infra & Cloud",
    items: [
      { name: "Vercel", icon: "simple-icons:vercel", color: "#000000" },
      { name: "Cloudflare", icon: "simple-icons:cloudflare", color: "#F38020" },
      { name: "Netlify", icon: "simple-icons:netlify", color: "#00C7B7" },
      { name: "AWS", icon: "simple-icons:amazonaws", color: "#ff9c08" },
    ],
  },
];

const brandColor = (hex?: string) =>
  !hex || hex.toLowerCase() !== "#000000" ? hex : "currentColor";
---

<section
  id="sobre-mi"
  class="page-bg py-28 px-6 md:px-12 section-lazy"
  role="region"
  aria-labelledby="about-title"
>
  <div class="max-w-7xl mx-auto">
    <h2
      id="about-title"
      class="text-surface text-4xl md:text-5xl font-extrabold text-center mb-16 fade-in-up fade-delay-100"
    >
      Sobre mí & Tecnologías
    </h2>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 lg:gap-12 items-start"
    >
      <div
        class="flex flex-col gap-8 fade-in-up fade-delay-200 md:col-span-1 lg:col-span-1"
      >
        <div class="flex justify-center">
          <img
            src="/assets/profile/alex.webp"
            alt="Foto de Alex Pereyra"
            class="rounded-3xl shadow-lg max-w-[320px] w-full object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
            decoding="async"
            width="320"
            height="320"
          />
        </div>

        <div class="glass-box p-6 md:p-8 space-y-6 leading-relaxed">
          <p class="text-pretty text-lg">
            Soy <strong>Alex Pereyra</strong>, frontend & full-stack orientado a
            rendimiento, accesibilidad y UX. Trabajo con Astro, React, Tailwind
            y TypeScript, priorizando buenas prácticas y calidad.
          </p>
          <p class="text-surface-muted text-sm">
            Stack eficiente, diseño limpio y accesible, con foco en detalles.
          </p>
        </div>
      </div>

      <div class="fade-in-up fade-delay-300 md:col-span-1 lg:col-span-2">
        <div class="grid lg:grid-cols-2 gap-6 lg:gap-8">
          {
            groups.map((g, gi) => (
              <div
                class="glass-box p-6 md:p-7 flex flex-col"
                style={`animation-delay:${gi * 100}ms`}
              >
                <h3 class="text-sm font-semibold tracking-wide text-center text-primary dark:text-accent mb-5">
                  {g.label}
                </h3>

                <ul class="grid grid-cols-4 gap-x-12 gap-y-6 md:gap-x-12">
                  {g.items.map((s, i) => (
                    <li
                      class="flex flex-col items-center gap-2"
                      style={`animation-delay:${i * 70}ms`}
                    >
                      <div class="skill-tile hover:scale-110" title={s.name}>
                        <Icon
                          name={s.icon}
                          class="w-8 h-8"
                          style={`color:${brandColor(s.color)}`}
                          aria-hidden="true"
                        />
                      </div>

                      <span class="text-[0.85rem] sm:text-sm text-surface text-center tracking-tight">
                        {s.name}
                      </span>
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>
