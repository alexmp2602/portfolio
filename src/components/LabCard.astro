---
const { title, slug, demo, image } = Astro.props;
const hasIframe = !!demo;
---

<article
  class="glass-card rounded-2xl overflow-hidden shadow-md transition-transform hover:scale-[1.015] hover:shadow-xl motion-safe:animate-fade-slide-up"
  data-reveal
>
  <a href={`/lab/${slug}`} class="block h-full">
    <div class="p-5">
      <h3 class="text-xl font-semibold text-surface mb-3">
        {title}
      </h3>
    </div>

    {
      hasIframe ? (
        <iframe
          src={demo}
          loading="lazy"
          title={`Vista previa de ${title}`}
          sandbox="allow-scripts allow-same-origin allow-popups"
          frameborder="0"
          class="w-full h-48 border-t border-black/5 dark:border-white/10 transition duration-300 md:pointer-events-auto md:opacity-100 md:filter-none pointer-events-none opacity-80 grayscale-[30%]"
        />
      ) : (
        <img
          src={image ?? "/assets/lab/default.webp"}
          alt={`Vista previa de ${title}`}
          loading="lazy"
          class="w-full h-48 object-cover border-t border-black/5 dark:border-white/10"
        />
      )
    }
  </a>
</article>
