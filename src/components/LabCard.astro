---
const { title, slug, demo } = Astro.props;
---

<style>
  iframe {
    width: 100%;
    height: 12rem; /* 48 */
    border-top: 1px solid var(--tw-border-opacity) !important;
  }
  @media (max-width: 767px) {
    iframe {
      pointer-events: none;
      user-select: none;
      filter: grayscale(30%);
      opacity: 0.8;
    }
  }
  @media (min-width: 768px) {
    iframe {
      pointer-events: auto;
      user-select: auto;
      filter: none;
      opacity: 1;
    }
  }
</style>

<article
  class="glass-card rounded-2xl overflow-hidden shadow-md transition-transform hover:scale-[1.015] hover:shadow-xl"
  data-reveal
>
  <a href={`/lab/${slug}`} class="block h-full">
    <div class="p-5">
      <h3 class="text-xl font-semibold text-dark dark:text-white mb-3">
        {title}
      </h3>
    </div>

    <iframe
      src={demo}
      loading="lazy"
      title={`Vista previa de ${title}`}
      sandbox="allow-scripts allow-same-origin allow-popups"
      frameborder="0"
      class="w-full h-48 borderiframeder-neutral-200 dark:border-neutral-700"
      onload="this.contentDocument.head.querySelector('base') || (() => {
    const base = this.contentDocument.createElement('base');
    base.href = this.src.substring(0, this.src.lastIndexOf('/') + 1);
    this.contentDocument.head.prepend(base);
  })()"
    ></iframe>
  </a>
</article>
