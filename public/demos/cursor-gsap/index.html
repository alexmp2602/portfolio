<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cursor Personalizado • GSAP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
      :root {
        --bg: #111315;
        --fg: #f6f7f9;
        --muted: #cfd3d8;
      }
      * {
        box-sizing: border-box;
        user-select: none;
      } /* no selección */
      html,
      body {
        height: 100%;
        margin: 0;
        background: radial-gradient(
          1200px 800px at 70% -10%,
          #1c2023 0%,
          var(--bg) 55%
        );
        color: var(--fg);
        font: 16px/1.45 ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, Arial;
        cursor: none; /* ocultar cursor sistema */
      }
      main {
        min-height: 100%;
        display: grid;
        place-items: center;
        text-align: center;
        padding: 28px;
      }
      h1 {
        margin: 0 0 10px;
        font-size: clamp(28px, 5vw, 48px);
        letter-spacing: 0.02em;
      }
      p {
        margin: 0;
        color: var(--muted);
      }

      /* Cursor */
      .cursor-dot,
      .cursor-ring {
        position: fixed;
        left: 0;
        top: 0;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 9999;
      }
      .cursor-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: #fff;
        mix-blend-mode: difference;
      }
      .cursor-ring {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        opacity: 0.7;
        border: 1px solid rgba(255, 255, 255, 0.42);
        background: radial-gradient(
          20px 20px at 50% 50%,
          rgba(255, 255, 255, 0.15),
          transparent 60%
        );
        filter: drop-shadow(0 2px 10px rgba(0, 0, 0, 0.4));
      }
      .cursor-hidden {
        opacity: 0 !important;
      }

      /* Desactivar en touch o reduce-motion */
      .no-custom-cursor .cursor-dot,
      .no-custom-cursor .cursor-ring {
        display: none;
      }
      .no-custom-cursor body {
        cursor: auto;
      } /* si no hay custom cursor, usar normal */
    </style>
  </head>
  <body>
    <main>
      <div>
        <h1>Cursor personalizado con GSAP</h1>
        <p>Micro-lag y pulso al click. Mové el mouse</p>
      </div>
    </main>

    <!-- elementos del cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-ring"></div>

    <script>
      (function () {
        const isTouch =
          "ontouchstart" in window || navigator.maxTouchPoints > 0;
        const reduce = window.matchMedia(
          "(prefers-reduced-motion: reduce)"
        ).matches;
        if (isTouch || reduce) {
          document.documentElement.classList.add("no-custom-cursor");
          return;
        }

        const dot = document.querySelector(".cursor-dot");
        const ring = document.querySelector(".cursor-ring");

        const qDotX = gsap.quickTo(dot, "x", {
          duration: 0.12,
          ease: "power3",
        });
        const qDotY = gsap.quickTo(dot, "y", {
          duration: 0.12,
          ease: "power3",
        });
        const qRingX = gsap.quickTo(ring, "x", {
          duration: 0.35,
          ease: "power2",
        });
        const qRingY = gsap.quickTo(ring, "y", {
          duration: 0.35,
          ease: "power2",
        });
        const qRingO = gsap.quickTo(ring, "opacity", {
          duration: 0.25,
          ease: "power2",
        });

        let x = innerWidth / 2,
          y = innerHeight / 2;

        function move(e) {
          x = e.clientX;
          y = e.clientY;
          qDotX(x);
          qDotY(y);
          qRingX(x);
          qRingY(y);
        }

        addEventListener("mousemove", move, { passive: true });
        addEventListener("mouseenter", () => {
          qRingO(0.7);
          dot.classList.remove("cursor-hidden");
          ring.classList.remove("cursor-hidden");
        });
        addEventListener("mouseleave", () => {
          qRingO(0);
          dot.classList.add("cursor-hidden");
          ring.classList.add("cursor-hidden");
        });

        // Pulso al click + onda efímera
        addEventListener("pointerdown", () => {
          gsap.fromTo(
            ring,
            { scale: 1.4, opacity: 0.85 },
            { scale: 0.95, opacity: 0.5, duration: 0.25, ease: "power2.out" }
          );
          gsap.fromTo(
            dot,
            { scale: 0.8 },
            { scale: 1, duration: 0.25, ease: "power2.out" }
          );

          const pulse = document.createElement("div");
          pulse.style.cssText =
            "position:fixed;left:0;top:0;transform:translate(-50%,-50%);width:10px;height:10px;border-radius:999px;pointer-events:none;z-index:9998;border:1px solid rgba(255,255,255,.35)";
          document.body.appendChild(pulse);
          gsap.set(pulse, { x, y });
          gsap.to(pulse, {
            width: 80,
            height: 80,
            opacity: 0,
            duration: 0.5,
            ease: "power1.out",
            onComplete: () => pulse.remove(),
          });
        });
      })();
    </script>
  </body>
</html>
